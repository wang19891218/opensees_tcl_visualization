import{R as e,L as t,S as n,C as o,F as a,P as r,W as i,H as s,G as l,O as c,a as d,M as f,b as u,V as p,c as m,A as y,d as g,Q as h,t as w}from"./vendor.6e699919.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();function v(e,t=5){return(" ".repeat(t)+e.toString()).slice(-t)}function b(e,t=2,n=5){return(" ".repeat(n)+e.toFixed(t)).slice(-n)}const x=new e;var I=new g(0,0);let E,C,z,_,S,L,j,H,W;var k=[],B="#ffffff",F=[],M=[],A=.1;const O=new t("rainbow",512);O.setMin(0),O.setMax(1),window.addEventListener("resize",(function(){let e=document.getElementById("buildingVisualization"),t=e.parentElement.clientWidth,n=e.parentElement.clientHeight;E.aspect=t/n,E.updateProjectionMatrix(),_.setSize(t,n)}),!1),window.addEventListener("pointermove",(function(e){let t=_.getContext().canvas.getBoundingClientRect();I.x=(e.clientX-t.left)/(t.right-t.left)*2-1,I.y=-(e.clientY-t.top)/(t.bottom-t.top)*2+1,L.style.left=e.clientX+15+"px",L.style.top=e.clientY-5+"px"}),!1),window.addEventListener("mousedown",(function(e){}),!1),window.addEventListener("mouseup",(function(e){}),!1),function(){z=new n,z.background=new o(10526880),z.fog=new a(10526880,200,1e3),E=new r(45,window.innerWidth/window.innerHeight,.001,100),E.position.set(0,1,1),C=document.getElementById("buildingVisualization");let e=C.parentElement.clientWidth,t=C.parentElement.clientHeight;_=new i({antialias:!0,canvas:C}),_.setSize(e,t),W=new s(16777215,526368,.8),W.position.set(0,200,20),z.add(W),j=new l(1,10),z.add(j),S=new c(E,_.domElement),S.target.set(0,0,0),S.enableZoom=!0,S.update()}(),L=document.createElement("div"),document.body.appendChild(L),L.style.position="absolute",L.style.top="0px",L.style.left="0px",L.style.width="60px",L.style.height="20px",L.style.borderRadius="1px",L.style.borderWidth="1px",L.style.borderStyle="solid",L.style.backgroundColor="white",L.style.opacity="0.9",L.innerText="Hello World",L.zIndex="1000",L.style.fontSize="12px",L.style.display="none",L.style.textAlign="center",function(){let e=new p(0,0,0);var t=new p(1,0,0),n=new p(0,1,0),o=new p(0,0,1),a=new y(t,e,1,16711680,.003,.003);z.add(a);var r=new y(n,e,1,65280,.003,.003);z.add(r);var i=new y(o,e,1,255,.003,.003);z.add(i),console.log(i),M.push(a),M.push(a),M.push(a)}(),function e(){requestAnimationFrame(e),S.update(),function(){if(x.setFromCamera(I,E),k){const t=x.intersectObjects(k,!1);t.length>0?H!=t[0].object&&(H=t[0].object,H.material.color.setHex(16777215)):(e=B,k.forEach((function(t){t.material.color.set(e)})),H=null)}var e;if(F){const e=x.intersectObjects(F,!1);e.length>0?H!=e[0].object&&(H=e[0].object,H.material.color.setHex(16777215)):(F.forEach((function(e){e.material.color.set(e.targetColor)})),H=null)}H?(L.innerText=H.displayInfo,L.style.display="block"):L.style.display="none",_.render(z,E)}()}();const P=new w.exports.Pane({container:document.getElementById("controlPanel")}),R={model_name:"",showData:!1,nodeScale:1,nodeColor:"#ffffff",beamScale:1,beamColor:"#ffffff",rotation_y:0,color:"#0f0"};P.addInput(R,"model_name"),P.addInput(R,"showData");var T=P.addInput(R,"nodeScale",{min:.001,max:10}),V=P.addInput(R,"nodeColor",{}),q=P.addInput(R,"beamScale",{min:.001,max:10}),N=P.addInput(R,"beamColor",{}),D=P.addButton({title:"RandomBeamColor"});T.on("change",(e=>{var t;t=e.value,k&&k.forEach((function(e){e.scale.set(t,t,t)}))})),V.on("change",(e=>{var t;t=e.value,B=t})),q.on("change",(e=>{var t;t=e.value,F&&F.forEach((function(e){e.scale.set(t,1,t)}))})),N.on("change",(e=>{var t;t=e.value,F.forEach((function(e){e.targetColor=t}))})),D.on("click",(()=>{!function(){for(let e=0;e<F.length;e++){let t=new o(16777215);t.setHex(16777215*Math.random()),F[e].material.color.set(t),F[e].targetColor=t}}()}));const X=document.getElementById("file-selector");X.addEventListener("change",(e=>{const t=e.target.files,n=new FileReader;var o;n.onload=(o=n,function(){for(var e=o.result.split("\n"),[t,n]=function(e){for(var t={},n={},o=0;o<e.length;o++){let u=e[o];if(u.startsWith("model")){var a=u.match(/-ndm\s\d*.*-/)[0];parseInt(a.slice(4,-1)),a=u.match(/-ndf\s\d*/)[0],parseInt(a.slice(4))}if(u.startsWith("node")){var r=u.split(/\s+/).slice(1),i=parseInt(r[0]),s=r.slice(1).map((function(e){return parseFloat(e)}));n[i]={coordinate:s}}if(u.startsWith("mass")){r=u.split(/\s+/).slice(1),i=parseInt(r[0]);var l=r.slice(1).map((function(e){return parseFloat(e)}));n[i].directional_mass=l,n[i].mass=(l[0]+l[1]+l[2])/3}if(u.startsWith("element")){(r=u.split(/\s+/).slice(1))[0];var c=parseInt(r[1]),d=parseInt(r[2]),f=parseInt(r[3]);t[c]={},t[c].node_number_1=d,t[c].node_number_2=f}}return[n,t]}(e),a="<p id='tcl_txt_p'>",r=9;r<e.length;r++)a+=e[r]+"<br>";document.getElementById("tcl_txt").innerHTML=a,function(e){var t=Object.keys(e);k=[];for(var n=new p,o=0;o<t.length;o++){let s=t[o],l=e[s].coordinate;e[s].mass;var a=new d(.001,10,10);a.center();var r=new f({color:B,opacity:.5}),i=new u(a,r);i.position.x=.01*l[0],i.position.y=.01*l[2],i.position.z=.01*l[1],i.name="node number: "+v(s)+" Coord: "+b(l[0])+", "+b(l[1])+", "+b(l[2]),i.targetColor=B,i.displayInfo="node number: "+v(s),k.push(i),z.add(i),n.x+=i.position.x/t.length,n.y+=i.position.y/t.length,n.z+=i.position.z/t.length}S.target.set(n.x,n.y,n.z),E.position.set(3*n.x,3*n.y,3*n.z),A=2*Math.hypot(...n.toArray()),console.log("arrowHelperLength: "+A),M[0].scale.set(A,1,1),M[1].scale.set(1,A,1),M[2].scale.set(1,1,A),console.log(M[2])}(t),function(e,t){for(var n=Object.keys(e),o=0;o<n.length;o++){let s=n[o],l=e[s].node_number_1,c=e[s].node_number_2,d=new p(t[l].coordinate[0],t[l].coordinate[2],t[l].coordinate[1]),y=new p(t[c].coordinate[0],t[c].coordinate[2],t[c].coordinate[1]),g=new p((d.x+y.x)/2,(d.y+y.y)/2,(d.z+y.z)/2);var a=new m(5e-4,5e-4,1,10);a.center();let w=d.sub(y),x=w.length();a.scale(1,.01*x,1);var r=new f({color:"#ffffff",opacity:.5}),i=new u(a,r);i.position.x=.01*g.x,i.position.y=.01*g.y,i.position.z=.01*g.z,i.name="node number: "+v(s)+" Coord: "+b(d.x)+", "+b(d.y)+", "+b(d.z)+" Coord: "+b(y.x)+", "+b(y.y)+", "+b(y.z),i.targetColor="#ffffff",i.displayInfo="element number: "+v(s);let I=new h;I.setFromUnitVectors(new p(0,1,0),new p(...w.divideScalar(x).toArray())),i.quaternion.copy(I),F.push(i),z.add(i),console.log(new p(w.divideScalar(x))),console.log(I),console.log(i)}}(n,t),X.value=""}),n.readAsText(t[0])}));
