import{R as e,L as t,S as n,C as o,F as a,P as i,W as r,H as l,G as s,O as c,a as d,M as u,b as p,V as m,c as f,A as g,d as y,Q as h,t as w}from"./vendor.6e699919.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();function v(e,t=5){return(" ".repeat(t)+e.toString()).slice(-t)}function x(e,t=2,n=5){return(" ".repeat(n)+e.toFixed(t)).slice(-n)}const b=new e;var I=new y(0,0);let E,z,C,_,H,B,S,L,j;var O=[],W="#ffffff",k=[],F=[],M=.1;const A=new t("rainbow",512);A.setMin(0),A.setMax(1),window.addEventListener("resize",(function(){let e=document.getElementById("buildingVisualization"),t=e.parentElement.clientWidth,n=e.parentElement.clientHeight;E.aspect=t/n,E.updateProjectionMatrix(),_.setSize(t,n)}),!1),window.addEventListener("pointermove",(function(e){let t=_.getContext().canvas.getBoundingClientRect();I.x=(e.clientX-t.left)/(t.right-t.left)*2-1,I.y=-(e.clientY-t.top)/(t.bottom-t.top)*2+1,B.style.left=e.clientX+15+"px",B.style.top=e.clientY-5+"px"}),!1),window.addEventListener("mousedown",(function(e){}),!1),window.addEventListener("mouseup",(function(e){}),!1),function(){C=new n,C.background=new o(10526880),C.fog=new a(10526880,200,1e3),E=new i(45,window.innerWidth/window.innerHeight,.001,100),E.position.set(0,1,1),z=document.getElementById("buildingVisualization");let e=z.parentElement.clientWidth,t=z.parentElement.clientHeight;_=new r({antialias:!0,canvas:z}),_.setSize(e,t),j=new l(16777215,526368,.8),j.position.set(0,200,20),C.add(j),S=new s(1,10),C.add(S),H=new c(E,_.domElement),H.target.set(0,0,0),H.enableZoom=!0,H.update()}(),B=document.createElement("div"),document.body.appendChild(B),B.style.position="absolute",B.style.top="0px",B.style.left="0px",B.style.width="60px",B.style.height="20px",B.style.borderRadius="1px",B.style.borderWidth="1px",B.style.borderStyle="solid",B.style.backgroundColor="white",B.style.opacity="0.9",B.innerText="Hello World",B.zIndex="1000",B.style.fontSize="12px",B.style.display="none",B.style.textAlign="center",function(){let e=new m(0,0,0);var t=new m(1,0,0),n=new m(0,1,0),o=new m(0,0,1),a=new g(t,e,1,16711680,.003,.003);C.add(a);var i=new g(n,e,1,65280,.003,.003);C.add(i);var r=new g(o,e,1,255,.003,.003);C.add(r),F.push(a),F.push(a),F.push(a)}(),function e(){requestAnimationFrame(e),H.update(),function(){if(b.setFromCamera(I,E),O){const t=b.intersectObjects(O,!1);t.length>0?L!=t[0].object&&(L=t[0].object,L.material.color.setHex(16777215)):(e=W,O.forEach((function(t){t.material.color.set(e)})),L=null)}var e;if(k){const e=b.intersectObjects(k,!1);e.length>0?L!=e[0].object&&(L=e[0].object,L.material.color.setHex(16777215)):(k.forEach((function(e){e.material.color.set(e.targetColor)})),L=null)}L?(B.innerText=L.displayInfo,B.style.display="block"):B.style.display="none",_.render(C,E)}()}();const P=new w.exports.Pane({container:document.getElementById("controlPanel")}),R={model_name:"",showData:!1,nodeScale:1,nodeColor:"#ffffff",nodeOpacity:.7,beamScale:1,beamColor:"#ffffff",beamOpacity:.7,rotation_y:0,color:"#0f0"};P.addInput(R,"model_name"),P.addInput(R,"showData");var V=P.addInput(R,"nodeScale",{min:.001,max:2}),T=P.addInput(R,"nodeOpacity",{min:0,max:1}),q=P.addInput(R,"nodeColor",{}),N=P.addInput(R,"beamScale",{min:.001,max:2}),D=P.addInput(R,"beamOpacity",{min:0,max:1}),X=P.addInput(R,"beamColor",{}),Y=P.addButton({title:"RandomBeamColor"});V.on("change",(e=>{var t;t=e.value,O&&O.forEach((function(e){e.scale.set(t,t,t)}))})),T.on("change",(e=>{var t;t=e.value,O&&O.forEach((function(e){e.material.opacity=t}))})),q.on("change",(e=>{var t;t=e.value,W=t})),N.on("change",(e=>{var t;t=e.value,k&&k.forEach((function(e){e.scale.set(t,1,t)}))})),D.on("change",(e=>{var t;t=e.value,k&&k.forEach((function(e){e.material.opacity=t}))})),X.on("change",(e=>{var t;t=e.value,k.forEach((function(e){e.targetColor=t}))})),Y.on("click",(()=>{!function(){for(let e=0;e<k.length;e++){let t=new o(16777215);t.setHex(16777215*Math.random()),k[e].material.color.set(t),k[e].targetColor=t}}()}));const G=document.getElementById("file-selector");G.addEventListener("change",(e=>{const t=e.target.files,n=new FileReader;var o;n.onload=(o=n,function(){for(var e=o.result.split("\n"),[t,n]=function(e){for(var t={},n={},o=0;o<e.length;o++){let p=e[o];if(p.startsWith("model")){var a=p.match(/-ndm\s\d*.*-/)[0];parseInt(a.slice(4,-1)),a=p.match(/-ndf\s\d*/)[0],parseInt(a.slice(4))}if(p.startsWith("node")){var i=p.split(/\s+/).slice(1),r=parseInt(i[0]),l=i.slice(1).map((function(e){return parseFloat(e)}));n[r]={coordinate:l}}if(p.startsWith("mass")){i=p.split(/\s+/).slice(1),r=parseInt(i[0]);var s=i.slice(1).map((function(e){return parseFloat(e)}));n[r].directional_mass=s,n[r].mass=(s[0]+s[1]+s[2])/3}if(p.startsWith("element")){(i=p.split(/\s+/).slice(1))[0];var c=parseInt(i[1]),d=parseInt(i[2]),u=parseInt(i[3]);t[c]={},t[c].node_number_1=d,t[c].node_number_2=u}}return[n,t]}(e),a="<p id='tcl_txt_p'>",i=9;i<e.length;i++)a+=e[i]+"<br>";document.getElementById("tcl_txt").innerHTML=a,function(e){for(var t=Object.keys(e);O.length>0;)C.remove(O.pop());for(var n=new m,o=0;o<t.length;o++){let l=t[o],s=e[l].coordinate;e[l].mass;var a=new d(4e-4,10,10);a.center();var i=new u({color:W,transparent:!0,opacity:.7}),r=new p(a,i);r.position.x=.01*s[0],r.position.y=.01*s[2],r.position.z=.01*s[1],r.name="node number: "+v(l)+" Coord: "+x(s[0])+", "+x(s[1])+", "+x(s[2]),r.targetColor=W,r.displayInfo="node number: "+v(l),O.push(r),C.add(r),n.x+=r.position.x/t.length,n.y+=r.position.y/t.length,n.z+=r.position.z/t.length}H.target.set(n.x,n.y,n.z),E.position.set(3*n.x,3*n.y,3*n.z),M=2*Math.hypot(...n.toArray()),console.log("arrowHelperLength: "+M),F[0].scale.set(M,1,1),F[1].scale.set(1,M,1),F[2].scale.set(1,1,M),console.log(F[2])}(t),function(e,t){for(var n=Object.keys(e);k.length>0;)C.remove(k.pop());for(var o=0;o<n.length;o++){let l=n[o],s=e[l].node_number_1,c=e[l].node_number_2,d=new m(t[s].coordinate[0],t[s].coordinate[2],t[s].coordinate[1]),g=new m(t[c].coordinate[0],t[c].coordinate[2],t[c].coordinate[1]),y=new m((d.x+g.x)/2,(d.y+g.y)/2,(d.z+g.z)/2);var a=new f(3e-4,3e-4,1,10);a.center();let w=d.sub(g),b=w.length();a.scale(1,.01*b,1);var i=new u({color:"#ffffff",transparent:!0,opacity:.7}),r=new p(a,i);r.position.x=.01*y.x,r.position.y=.01*y.y,r.position.z=.01*y.z,r.name="node number: "+v(l)+" Coord: "+x(d.x)+", "+x(d.y)+", "+x(d.z)+" Coord: "+x(g.x)+", "+x(g.y)+", "+x(g.z),r.targetColor="#ffffff",r.displayInfo="element number: "+v(l);let I=new h;I.setFromUnitVectors(new m(0,1,0),new m(...w.divideScalar(b).toArray())),r.quaternion.copy(I),k.push(r),C.add(r),console.log(new m(w.divideScalar(b))),console.log(I),console.log(r)}}(n,t),G.value="",G.title=""}),n.readAsText(t[0])})),window.onload=window.resize=function(){document.getElementById("content").style.height=window.innerHeight+"px",document.getElementById("tcl_txt").style.height=document.getElementById("buildingVisualization").clientHeight-document.getElementById("controlPanel").clientHeight-document.getElementById("tcl_input").clientHeight+"px",console.log(window.innerHeight),console.log(document.getElementById("controlPanel").clientHeight),console.log(document.getElementById("tcl_input").clientHeight)};
