import{R as e,L as t,S as n,C as o,F as a,P as i,W as r,H as l,G as s,O as c,a as d,M as u,b as p,V as m,c as f,d as y,A as g,e as h,Q as w,t as v}from"./vendor.a291b15d.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const b=["beamWithHinges","dispBeamColumn","elasticBeamColumn","nonlinearBeamColumn"],x=["ShellMITC4"];function I(e,t=5){return(" ".repeat(t)+e.toString()).slice(-t)}function E(e,t=4,n=5){return(" ".repeat(n)+e.toFixed(t)).slice(-n)}function C(e){let t=e.split(/\s+/).slice(1);var n=t[0];let o={};if(b.includes(n)){var a=parseInt(t[1]),i=parseInt(t[2]),r=parseInt(t[3]);o.type=n,o.intElementNumber=a,o.listNodeNumber=[i,r]}else if(x.includes(n)){a=parseInt(t[1]),i=parseInt(t[2]),r=parseInt(t[3]);var l=parseInt(t[4]),s=parseInt(t[5]);o.type=n,o.intElementNumber=a,o.listNodeNumber=[i,r,l,s]}else console.log("ERROR, element type not supported"),console.log(e);return o}const z=new e;var N=new h(0,0);let B,H,S,O,L,W,k,M,_;var R=[],j="#ffffff",A=[],F=[],P=[],D=.1;const T=new t("rainbow",512);T.setMin(0),T.setMax(1),window.addEventListener("resize",(function(){let e=document.getElementById("buildingVisualization"),t=e.parentElement.clientWidth,n=e.parentElement.clientHeight;B.aspect=t/n,B.updateProjectionMatrix(),O.setSize(t,n)}),!1),window.addEventListener("pointermove",(function(e){let t=O.getContext().canvas.getBoundingClientRect();N.x=(e.clientX-t.left)/(t.right-t.left)*2-1,N.y=-(e.clientY-t.top)/(t.bottom-t.top)*2+1,W.style.left=e.clientX+15+"px",W.style.top=e.clientY-5+"px"}),!1),window.addEventListener("mousedown",(function(e){}),!1),window.addEventListener("mouseup",(function(e){}),!1),function(){S=new n,S.background=new o(10526880),S.fog=new a(10526880,200,1e3),B=new i(45,window.innerWidth/window.innerHeight,.001,100),B.position.set(0,1,1),H=document.getElementById("buildingVisualization");let e=H.parentElement.clientWidth,t=H.parentElement.clientHeight;O=new r({antialias:!0,canvas:H}),O.setSize(e,t),_=new l(16777215,526368,.8),_.position.set(0,200,20),S.add(_),k=new s(1,10),S.add(k),L=new c(B,O.domElement),L.target.set(0,0,0),L.enableZoom=!0,L.update()}(),W=document.createElement("div"),document.body.appendChild(W),W.style.position="absolute",W.style.top="0px",W.style.left="0px",W.style.width="80px",W.style.height="20px",W.style.borderRadius="1px",W.style.borderWidth="1px",W.style.borderStyle="solid",W.style.backgroundColor="white",W.style.opacity="0.9",W.innerText="Hello World",W.zIndex="1000",W.style.fontSize="12px",W.style.display="none",W.style.textAlign="center",function(){let e=new m(0,0,0);var t=new m(1,0,0),n=new m(0,1,0),o=new m(0,0,1),a=new g(t,e,1,16711680,.003,.003);S.add(a);var i=new g(n,e,1,65280,.003,.003);S.add(i);var r=new g(o,e,1,255,.003,.003);S.add(r),P.push(a),P.push(a),P.push(a)}(),function e(){requestAnimationFrame(e),L.update(),function(){if(z.setFromCamera(N,B),R||A||F){const t=z.intersectObjects(Array.prototype.concat(R,A,F),!1);t.length>0?M!=t[0].object&&(M=t[0].object,M.material.color.setHex(16777215)):(e=j,R.forEach((function(t){t.material.color.set(e)})),A.forEach((function(e){e.material.color.set(e.targetColor)})),F.forEach((function(e){e.material.color.set(e.targetColor)})),M=null)}var e;M?(W.innerText=M.displayInfo,W.style.display="block"):W.style.display="none",O.render(S,B)}()}();const V=new v.exports.Pane({container:document.getElementById("controlPanel")}),q={model_name:"",showData:!1,nodeScale:1,nodeColor:"#ffffff",nodeOpacity:.7,beamScale:1,beamColor:"#ffffff",beamOpacity:.7,shellDisplay:!0,shellColor:"#ffffff",shellOpacity:.7,rotation_y:0,color:"#0f0"};V.addInput(q,"model_name"),V.addInput(q,"showData");var X=V.addInput(q,"nodeScale",{min:.001,max:2}),Y=V.addInput(q,"nodeOpacity",{min:0,max:1}),G=V.addInput(q,"nodeColor",{}),K=V.addInput(q,"beamScale",{min:.001,max:2}),Q=V.addInput(q,"beamOpacity",{min:0,max:1}),U=V.addInput(q,"beamColor",{}),Z=V.addButton({title:"RandomBeamColor"}),J=V.addInput(q,"shellDisplay",{title:"DisplayShellElements"}),$=V.addInput(q,"shellOpacity",{min:0,max:1}),ee=V.addInput(q,"shellColor",{}),te=V.addButton({title:"RandomShellColor"});X.on("change",(e=>{var t;t=e.value,R&&R.forEach((function(e){e.scale.set(t,t,t)}))})),Y.on("change",(e=>{var t;t=e.value,R&&R.forEach((function(e){e.material.opacity=t}))})),G.on("change",(e=>{var t;t=e.value,j=t})),K.on("change",(e=>{var t;t=e.value,A&&A.forEach((function(e){e.scale.set(t,1,t)}))})),Q.on("change",(e=>{var t;t=e.value,A&&A.forEach((function(e){e.material.opacity=t}))})),U.on("change",(e=>{var t;t=e.value,A.forEach((function(e){e.targetColor=t}))})),Z.on("click",(()=>{!function(){for(let e=0;e<A.length;e++){let t=new o(16777215);t.setHex(16777215*Math.random()),A[e].material.color.set(t),A[e].targetColor=t}}()})),J.on("change",(e=>{var t;console.log(e.value),t=e.value,F.forEach((function(e){e.visible=t}))})),$.on("change",(e=>{var t;t=e.value,F&&F.forEach((function(e){e.material.opacity=t}))})),ee.on("change",(e=>{var t;t=e.value,F.forEach((function(e){e.targetColor=t}))})),te.on("click",(()=>{!function(){for(let e=0;e<F.length;e++){let t=new o(16777215);t.setHex(16777215*Math.random()),F[e].material.color.set(t),F[e].targetColor=t}}()}));const ne=document.getElementById("file-selector");ne.addEventListener("change",(e=>{const t=e.target.files,n=new FileReader;var o;n.onload=(o=n,function(){for(var e=o.result.split("\n"),[t,n,a]=function(e){for(var t={},n={},o={},a=0;a<e.length;a++){let d=e[a];if(d.startsWith("model")){var i=d.match(/-ndm\s\d*.*-/)[0];parseInt(i.slice(4,-1)),i=d.match(/-ndf\s\d*/)[0],parseInt(i.slice(4))}if(d.startsWith("node")){var r=d.split(/\s+/).slice(1),l=parseInt(r[0]),s=r.slice(1).map((function(e){return parseFloat(e)}));t[l]={coordinate:s}}if(d.startsWith("mass")){r=d.split(/\s+/).slice(1),l=parseInt(r[0]);var c=r.slice(1).map((function(e){return parseFloat(e)}));t[l].directional_mass=c,t[l].mass=(c[0]+c[1]+c[2])/3}if(d.startsWith("element")){let e=C(d),t=e.intElementNumber;2==e.listNodeNumber.length?n[t]=e:4==e.listNodeNumber.length&&(o[t]=e)}}return[t,n,o]}(e),i="<p id='tcl_txt_p'>",r=9;r<e.length;r++)i+=e[r]+"<br>";document.getElementById("tcl_txt").innerHTML=i,function(e){for(var t=Object.keys(e);R.length>0;)S.remove(R.pop());for(var n=new m,o=0;o<t.length;o++){let l=t[o],s=e[l].coordinate;e[l].mass;var a=new d(4e-4,10,10);a.center();var i=new u({color:j,transparent:!0,opacity:.7}),r=new p(a,i);r.position.x=.01*s[0],r.position.y=.01*s[2],r.position.z=.01*s[1],r.name="node number: "+I(l)+" Coord: "+E(s[0])+", "+E(s[1])+", "+E(s[2]),r.targetColor=j,r.displayInfo="node number: "+I(l),r.displayInfo=r.name,R.push(r),S.add(r),n.x+=r.position.x/t.length,n.y+=r.position.y/t.length,n.z+=r.position.z/t.length}L.target.set(n.x,n.y,n.z),B.position.set(3*n.x,3*n.y,3*n.z),D=2*Math.hypot(...n.toArray()),console.log("arrowHelperLength: "+D),P[0].scale.set(D,1,1),P[1].scale.set(1,D,1),P[2].scale.set(1,1,D),console.log(P[2])}(t),function(e,t){for(var n=Object.keys(e);A.length>0;)S.remove(A.pop());for(var o=0;o<n.length;o++){let l=n[o],s=e[l].listNodeNumber[0],c=e[l].listNodeNumber[1],d=new m(t[s].coordinate[0],t[s].coordinate[2],t[s].coordinate[1]),y=new m(t[c].coordinate[0],t[c].coordinate[2],t[c].coordinate[1]),g=new m((d.x+y.x)/2,(d.y+y.y)/2,(d.z+y.z)/2);var a=new f(3e-4,3e-4,1,10);a.center();let h=d.sub(y),v=h.length();a.scale(1,.01*v,1);var i=new u({color:"#ffffff",transparent:!0,opacity:.7}),r=new p(a,i);r.position.x=.01*g.x,r.position.y=.01*g.y,r.position.z=.01*g.z,r.name="node number: "+I(l)+" Coord: "+E(d.x)+", "+E(d.y)+", "+E(d.z)+" Coord: "+E(y.x)+", "+E(y.y)+", "+E(y.z),r.targetColor="#ffffff",r.displayInfo="element number: "+I(l);let b=new w;b.setFromUnitVectors(new m(0,1,0),new m(...h.divideScalar(v).toArray())),r.quaternion.copy(b),A.push(r),S.add(r),console.log(new m(h.divideScalar(v))),console.log(b),console.log(r)}}(n,t),function(e,t){for(var n=Object.keys(e);F.length>0;)S.remove(F.pop());for(var o=0;o<n.length;o++){let l=n[o],s=e[l].listNodeNumber[0],c=e[l].listNodeNumber[1],d=e[l].listNodeNumber[2],f=e[l].listNodeNumber[3],g=new m(t[s].coordinate[0],t[s].coordinate[2],t[s].coordinate[1]),h=new m(t[c].coordinate[0],t[c].coordinate[2],t[c].coordinate[1]),w=new m(t[d].coordinate[0],t[d].coordinate[2],t[d].coordinate[1]),v=new m(t[f].coordinate[0],t[f].coordinate[2],t[f].coordinate[1]),b=new m((g.x+h.x+w.x+v.x)/4,(g.y+h.y+w.y+v.y)/4,(g.z+h.z+w.z+v.z)/4);var a=new y([g,h,w,v]);a.center(),a.scale(.01,.01,.01);var i=new u({color:"#ffffff",transparent:!0,opacity:.7}),r=new p(a,i);r.position.x=.01*b.x,r.position.y=.01*b.y,r.position.z=.01*b.z,r.name="element number: "+I(l)+" Coord: "+E(g.x)+", "+E(g.y)+", "+E(g.z)+" Coord: "+E(h.x)+", "+E(h.y)+", "+E(h.z)+" Coord: "+E(w.x)+", "+E(w.y)+", "+E(w.z)+" Coord: "+E(v.x)+", "+E(v.y)+", "+E(v.z),r.targetColor="#ffffff",r.displayInfo="element number: "+I(l),F.push(r),S.add(r)}}(a,t),ne.value="",ne.title=""}),n.readAsText(t[0])})),window.onload=window.resize=function(){document.getElementById("content").style.height=window.innerHeight+"px",document.getElementById("tcl_txt").style.height=document.getElementById("buildingVisualization").clientHeight-document.getElementById("controlPanel").clientHeight-document.getElementById("tcl_input").clientHeight+"px",console.log(window.innerHeight),console.log(document.getElementById("controlPanel").clientHeight),console.log(document.getElementById("tcl_input").clientHeight)};
